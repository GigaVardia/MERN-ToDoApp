(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{38:function(e,a,t){},49:function(e,a,t){"use strict";t.r(a);var n,r=t(0),c=t.n(r),s=t(17),i=t.n(s),l=t(33),o=t(5),u=(t(38),t(11)),d=u.c,p=t(9),j=t.n(p),b=t(2),O=t(12),m=t(13),g=function(){var e=Object(r.useState)(!1),a=Object(m.a)(e,2),t=a[0],n=a[1],c=Object(r.useState)(null),s=Object(m.a)(c,2),i=s[0],l=s[1];return{loading:t,request:Object(r.useCallback)(function(){var e=Object(O.a)(j.a.mark((function e(a){var t,r,c,s,i,o=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"GET",r=o.length>2&&void 0!==o[2]?o[2]:null,c=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=3,r&&(r=JSON.stringify(r),c["Content-Type"]="application/json"),n(!0),e.next=9,fetch(a,{method:t,body:r,headers:c});case 9:return s=e.sent,e.next=12,s.json();case 12:if(i=e.sent,s.ok){e.next=15;break}throw new Error(i.msg||"Something went wrong");case 15:return n(!1),e.abrupt("return",i);case 19:throw e.prev=19,e.t0=e.catch(3),n(!1),l(e.t0.message),e.t0;case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(a){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(r.useCallback)((function(){return l(null)}),[])}},D=t(31),f=t.n(D),_=t(32),h=t.n(_),E=function(){return h()(f.a)},y=t(1),v=function(){var e=Object(r.useState)(!1),a=Object(m.a)(e,2),t=a[0],n=a[1],c=g().request,s=Object(u.b)(),i=d((function(e){return e.userLogin})),l=d((function(e){return e.mainPageInfo})).loginFailed,o=E(),p=function(){var e=Object(O.a)(j.a.mark((function e(a){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),i.email&&i.password){e.next=4;break}return s({type:"SET_LOGIN_FAILED",payload:!0}),e.abrupt("return",-1);case 4:return e.prev=4,e.next=7,c("/api/auth/login","POST",Object(b.a)({},i));case 7:t=e.sent,n={name:t.payload.name,surname:t.payload.surname,email:t.payload.email,data:t.payload.data,id:t.payload._id},s({type:"ADD_NEW_USER_DATA",payload:n}),s({type:"SET_USER_LOGIN",payload:!0}),s({type:"SET_LOGIN_FAILED",payload:!1}),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),o.fire({title:Object(y.jsx)("p",{children:"Incorrect Email or Password!"})}),s({type:"SET_LOGIN_FAILED",payload:!0}),console.log(e.t0,"Error while login fetch...");case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(a){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return n(!0),t&&l&&document.querySelectorAll(".signIn-form-label-input").forEach((function(e){return e.classList.toggle("signIn-form-label-input--failed")})),function(){return n(!1)}}),[l,t]),Object(y.jsx)("div",{className:"signIn signIn-outer",children:Object(y.jsx)("div",{className:"signIn-inner container",children:Object(y.jsxs)("form",{className:"signIn-form",children:[Object(y.jsx)("h1",{className:"signIn-form-title",children:"Welcome to React Todo App!"}),Object(y.jsx)("label",{className:"signIn-form-label",children:Object(y.jsx)("input",{className:"signIn-form-label-input",type:"email",placeholder:"Email...",value:i.email,onChange:function(e){s({type:"ADD_EMAIL",payload:e.target.value})}})}),Object(y.jsx)("label",{className:"signIn-form-label",children:Object(y.jsx)("input",{className:"signIn-form-label-input",type:"password",placeholder:"Password...",value:i.password,onChange:function(e){s({type:"ADD_PASSWORD",payload:e.target.value})}})}),Object(y.jsx)("button",{className:"signIn-form-btn",onClick:p,type:"submit",children:"Sign In"}),Object(y.jsxs)("button",{className:"signIn-form-signUp",onClick:function(e){e.preventDefault(),s({type:"SET_SIGN_UP_CLICKED",payload:!0})},children:["You don't have an account? ",Object(y.jsx)("span",{className:"bolder",children:"Sign Up!"})]})]})})})},N=t(14),A=t(15),x=Object(y.jsx)(N.a,{icon:A.a}),I=function(){var e=g().request,a=Object(u.b)(),t=d((function(e){return e.userRegister})),n=Object(r.useState)(!1),c=Object(m.a)(n,2),s=c[0],i=c[1],l=E();Object(r.useEffect)((function(){s&&document.querySelectorAll(".signUp-form-label-input").forEach((function(e){return e.classList.toggle("signUp-form-label-input--failed")}))}),[s]);var o=function(){var n=Object(O.a)(j.a.mark((function n(r){var c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.name&&t.surname&&t.email&&t.password){n.next=4;break}return i(!0),n.abrupt("return");case 4:return n.prev=4,n.next=7,e("/api/auth/register","POST",Object(b.a)({},t));case 7:c=n.sent,console.log(c),a({type:"SET_SIGNED_UP_CLICKED",payload:!1}),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(4),l.fire({title:Object(y.jsx)("p",{children:"Please, enter valid data!"})}),i(!0),console.log(n.t0,"Error, while register fetch...");case 17:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(y.jsx)("div",{className:"singUp signUp-outer",children:Object(y.jsxs)("div",{className:"signUp-inner container",children:[Object(y.jsx)("div",{className:"signUp-backToMainPage",onClick:function(){a({type:"SET_SIGN_UP_CLICKED",payload:!1})},children:x}),Object(y.jsxs)("form",{className:"signUp-form",children:[Object(y.jsx)("h1",{className:"signUp-form-title",children:"Create Account"}),Object(y.jsx)("label",{className:"signUp-form-label",children:Object(y.jsx)("input",{className:"signUp-form-label-input",id:"nameInput",type:"text",placeholder:"Name...",value:t.name,onChange:function(e){a({type:"ADD_NAME",payload:e.target.value})}})}),Object(y.jsx)("label",{className:"signUp-form-label",children:Object(y.jsx)("input",{className:"signUp-form-label-input",id:"surnameInput",type:"text",placeholder:"Surname...",value:t.surname,onChange:function(e){a({type:"ADD_SURNAME",payload:e.target.value})}})}),Object(y.jsx)("label",{className:"signUp-form-label",children:Object(y.jsx)("input",{className:"signUp-form-label-input",id:"emailInput",type:"email",placeholder:"Email...",value:t.email,onChange:function(e){a({type:"ADD_EMAIL",payload:e.target.value})}})}),Object(y.jsx)("label",{className:"signUp-form-label",children:Object(y.jsx)("input",{className:"signUp-form-label-input",id:"passwordInput",type:"password",placeholder:"Password...",value:t.password,onChange:function(e){a({type:"ADD_PASSWORD",payload:e.target.value})}})}),Object(y.jsx)("button",{onClick:o,className:"signUp-form-btn",type:"submit",children:"Sign Up"})]})]})})},S=["January","February","March","April","May","June","July","August","September","October","November","December"],L=Object(y.jsx)(N.a,{icon:A.c}),T=Object(y.jsx)(N.a,{icon:A.b}),U=Object(y.jsx)(N.a,{icon:A.a}),k=function(e){var a=e.task,t=e.index,n=Object(u.b)();return Object(y.jsxs)("label",{className:"userPage-tasks-inner__item",children:[Object(y.jsx)("input",{className:"userPage-tasks-inner__item-input",id:"task".concat(t),type:"text",onChange:function(e){var a=e.target;a&&n({type:"CHANGE_TODO",payload:{index:t,task:a.value}})},value:a}),Object(y.jsx)("div",{onClick:function(){n({type:"DELETE_TODO",payload:{index:t}})},className:"userPage-tasks-inner__item-delete",children:T})]})},w=function(){var e,a=g().request,t=Object(u.b)(),n=d((function(e){return e.userData})),r={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()},c=function(){var e=Object(O.a)(j.a.mark((function e(){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("/api/saveuser","PATCH",{email:n.email,data:n.data});case 3:r=e.sent,console.log(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"SET_USER_LOGIN",payload:!1}),console.log(e.t0,"Error while fetching saving data...");case 11:t({type:"SET_USER_LOGIN",payload:!1}),t({type:"INITIALIZE"});case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{className:"userPage userPage-outer",children:Object(y.jsxs)("div",{className:"userPage-inner container",children:[Object(y.jsx)("div",{className:"userPage-logOut",onClick:c,children:U}),Object(y.jsxs)("div",{className:"userPage-title",children:["Hello ",n.name," ",n.surname,"!"]}),Object(y.jsxs)("div",{className:"userPage-date",children:[Object(y.jsx)("span",{className:"bolder",children:(new Date).toLocaleDateString(window.navigator.language,{weekday:"long"})}),",\xa0",r.day," ",S[r.month+1]]}),Object(y.jsxs)("div",{className:"userPage__actions",children:[Object(y.jsx)("div",{className:"userPage__actions-item",onClick:function(){t({type:"ADD_NEW_TODO",payload:{task:"New Todo"}})},children:L}),Object(y.jsx)("div",{className:"userPage__actions-item",onClick:function(){t({type:"DELETE_ALL"})},children:T})]}),Object(y.jsx)("div",{className:"userPage-tasks",children:Object(y.jsx)("div",{className:"userPage-tasks-inner",children:(null===(e=n.data)||void 0===e?void 0:e.length)>0?n.data.map((function(e,a){return Object(y.jsx)(k,{index:a,task:e.task},a)})):Object(y.jsx)("label",{className:"userPage-tasks-inner__item",children:Object(y.jsx)("input",{placeholder:"No Tasks for today!",type:"text",className:"userPage-tasks-inner__item-input",disabled:!0})})})})]})})},P=function(){var e=d((function(e){return e.mainPageInfo})),a=e.isUserLogged,t=e.signUpClicked;return Object(y.jsx)("main",{className:"main main-outer",children:Object(y.jsx)("div",{className:"main-inner container",children:Object(y.jsx)("div",{className:"main-app",children:a?Object(y.jsx)(w,{}):t?Object(y.jsx)(I,{}):Object(y.jsx)(v,{})})})})},C=function(){return Object(y.jsx)(l.a,{children:Object(y.jsx)(o.c,{children:Object(y.jsx)(o.a,{exact:!0,path:"/",children:Object(y.jsx)(P,{})})})})},R=t(19);!function(e){e.ADD_NAME="ADD_NAME",e.ADD_SURNAME="ADD_SURNAME",e.ADD_EMAIL="ADD_EMAIL",e.ADD_PASSWORD="ADD_PASSWORD"}(n||(n={}));var G,M={name:"",surname:"",email:"",password:"",data:[]};!function(e){e.ADD_EMAIL="ADD_EMAIL",e.ADD_PASSWORD="ADD_PASSWORD"}(G||(G={}));var W,F={email:"",password:""};!function(e){e.SET_USER_LOGIN="SET_USER_LOGIN",e.SET_LOGIN_FAILED="SET_LOGIN_FAILED",e.SET_SIGN_UP_CLICKED="SET_SIGN_UP_CLICKED"}(W||(W={}));var q,H={isUserLogged:!1,loginFailed:!1,signUpClicked:!1},J=t(29);!function(e){e.ADD_NEW_USER_DATA="ADD_NEW_USER_DATA",e.ADD_NEW_TODO="ADD_NEW_TODO",e.CHANGE_TODO="CHANGE_TODO",e.DELETE_TODO="DELETE_TODO",e.DELETE_ALL="DELETE_ALL",e.INITIALIZE="INITIALIZE"}(q||(q={}));var K={name:"",surname:"",email:"",id:"",data:[]},Z=Object(R.b)({userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case n.ADD_NAME:return Object(b.a)(Object(b.a)({},e),{},{name:a.payload});case n.ADD_SURNAME:return Object(b.a)(Object(b.a)({},e),{},{surname:a.payload});case n.ADD_EMAIL:return Object(b.a)(Object(b.a)({},e),{},{email:a.payload});case n.ADD_PASSWORD:return Object(b.a)(Object(b.a)({},e),{},{password:a.payload});default:return Object(b.a)({},e)}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case G.ADD_EMAIL:return Object(b.a)(Object(b.a)({},e),{},{email:a.payload});case G.ADD_PASSWORD:return Object(b.a)(Object(b.a)({},e),{},{password:a.payload});default:return Object(b.a)({},e)}},mainPageInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case W.SET_USER_LOGIN:return Object(b.a)(Object(b.a)({},e),{},{isUserLogged:a.payload});case W.SET_LOGIN_FAILED:return Object(b.a)(Object(b.a)({},e),{},{loginFailed:a.payload});case W.SET_SIGN_UP_CLICKED:return Object(b.a)(Object(b.a)({},e),{},{signUpClicked:a.payload});default:return e}},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case q.ADD_NEW_USER_DATA:return Object(b.a)(Object(b.a)({},e),a.payload);case q.ADD_NEW_TODO:return Object(b.a)(Object(b.a)({},e),{},{data:[].concat(Object(J.a)(e.data),[a.payload])});case q.DELETE_ALL:return Object(b.a)(Object(b.a)({},e),{},{data:[]});case q.CHANGE_TODO:var t=Object(J.a)(e.data);return t[a.payload.index]={task:a.payload.task},Object(b.a)(Object(b.a)({},e),{},{data:t});case q.DELETE_TODO:return Object(b.a)(Object(b.a)({},e),{},{data:e.data.filter((function(e,t){return t!==a.payload.index}))});case q.INITIALIZE:return e=K;default:return Object(b.a)({},e)}}}),Y=Object(R.c)(Z);i.a.render(Object(y.jsx)(u.a,{store:Y,children:Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(C,{})})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.ddc347e5.chunk.js.map