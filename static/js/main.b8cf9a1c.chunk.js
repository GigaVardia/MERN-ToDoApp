(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var n,r=t(1),s=t.n(r),c=t(10),i=t.n(c),l=(t(28),t(5)),o=l.c,u=t(4),d=t.n(u),p=t(2),b=t(6),j=t(7),O=function(){var e=Object(r.useState)(!1),a=Object(j.a)(e,2),t=a[0],n=a[1],s=Object(r.useState)(null),c=Object(j.a)(s,2),i=c[0],l=c[1];return{loading:t,request:Object(r.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(a){var t,r,s,c,i,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"GET",r=o.length>2&&void 0!==o[2]?o[2]:null,s=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=3,r&&(r=JSON.stringify(r),s["Content-Type"]="application/json"),n(!0),e.next=9,fetch(a,{method:t,body:r,headers:s});case 9:return c=e.sent,e.next=12,c.json();case 12:if(i=e.sent,c.ok){e.next=15;break}throw new Error(i.msg||"Something went wrong");case 15:return n(!1),e.abrupt("return",i);case 19:throw e.prev=19,e.t0=e.catch(3),n(!1),l(e.t0.message),e.t0;case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(a){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(r.useCallback)((function(){return l(null)}),[])}},m=t(22),g=t.n(m),D=t(23),f=t.n(D),_=function(){return f()(g.a)},h=t(0),E=function(){var e=Object(r.useState)(!1),a=Object(j.a)(e,2),t=a[0],n=a[1],s=O().request,c=Object(l.b)(),i=o((function(e){return e.userLogin})),u=o((function(e){return e.mainPageInfo})).loginFailed,m=_(),g=function(){var e=Object(b.a)(d.a.mark((function e(a){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),i.email&&i.password){e.next=4;break}return c({type:"SET_LOGIN_FAILED",payload:!0}),e.abrupt("return",-1);case 4:return e.prev=4,e.next=7,s("https://boiling-garden-79412.herokuapp.com/api/auth/login","POST",Object(p.a)({},i));case 7:t=e.sent,n={name:t.payload.name,surname:t.payload.surname,email:t.payload.email,data:t.payload.data,id:t.payload._id},c({type:"ADD_NEW_USER_DATA",payload:n}),c({type:"SET_USER_LOGIN",payload:!0}),c({type:"SET_LOGIN_FAILED",payload:!1}),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),m.fire({title:Object(h.jsx)("p",{children:"Incorrect Email or Password!"})}),c({type:"SET_LOGIN_FAILED",payload:!0}),console.log(e.t0,"Error while login fetch...");case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(a){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return n(!0),t&&u&&document.querySelectorAll(".signIn-form-label-input").forEach((function(e){return e.classList.toggle("signIn-form-label-input--failed")})),function(){return n(!1)}}),[u,t]),Object(h.jsx)("div",{className:"signIn signIn-outer",children:Object(h.jsx)("div",{className:"signIn-inner container",children:Object(h.jsxs)("form",{className:"signIn-form",children:[Object(h.jsx)("h1",{className:"signIn-form-title",children:"Welcome to React Todo App!"}),Object(h.jsx)("label",{className:"signIn-form-label",children:Object(h.jsx)("input",{className:"signIn-form-label-input",type:"email",placeholder:"Email...",value:i.email,onChange:function(e){c({type:"ADD_EMAIL",payload:e.target.value})}})}),Object(h.jsx)("label",{className:"signIn-form-label",children:Object(h.jsx)("input",{className:"signIn-form-label-input",type:"password",placeholder:"Password...",value:i.password,onChange:function(e){c({type:"ADD_PASSWORD",payload:e.target.value})}})}),Object(h.jsx)("button",{className:"signIn-form-btn",onClick:g,type:"submit",children:"Sign In"}),Object(h.jsxs)("button",{className:"signIn-form-signUp",onClick:function(e){e.preventDefault(),c({type:"SET_SIGN_UP_CLICKED",payload:!0})},children:["You don't have an account? ",Object(h.jsx)("span",{className:"bolder",children:"Sign Up!"})]})]})})})},y=t(8),v=t(9),N=Object(h.jsx)(y.a,{icon:v.a}),A=function(){var e=O().request,a=Object(l.b)(),t=o((function(e){return e.userRegister})),n=Object(r.useState)(!1),s=Object(j.a)(n,2),c=s[0],i=s[1],u=_();Object(r.useEffect)((function(){c&&document.querySelectorAll(".signUp-form-label-input").forEach((function(e){return e.classList.toggle("signUp-form-label-input--failed")}))}),[c]);var m=function(){var n=Object(b.a)(d.a.mark((function n(r){var s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.name&&t.surname&&t.email&&t.password){n.next=4;break}return i(!0),n.abrupt("return");case 4:return n.prev=4,n.next=7,e("https://boiling-garden-79412.herokuapp.com/api/auth/register","POST",Object(p.a)({},t));case 7:s=n.sent,console.log(s),a({type:"SET_SIGNED_UP_CLICKED",payload:!1}),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(4),u.fire({title:Object(h.jsx)("p",{children:"Please, enter valid data!"})}),i(!0),console.log(n.t0,"Error, while register fetch...");case 17:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"singUp signUp-outer",children:Object(h.jsxs)("div",{className:"signUp-inner container",children:[Object(h.jsx)("div",{className:"signUp-backToMainPage",onClick:function(){a({type:"SET_SIGN_UP_CLICKED",payload:!1})},children:N}),Object(h.jsxs)("form",{className:"signUp-form",children:[Object(h.jsx)("h1",{className:"signUp-form-title",children:"Create Account"}),Object(h.jsx)("label",{className:"signUp-form-label",children:Object(h.jsx)("input",{className:"signUp-form-label-input",id:"nameInput",type:"text",placeholder:"Name...",value:t.name,onChange:function(e){a({type:"ADD_NAME",payload:e.target.value})}})}),Object(h.jsx)("label",{className:"signUp-form-label",children:Object(h.jsx)("input",{className:"signUp-form-label-input",id:"surnameInput",type:"text",placeholder:"Surname...",value:t.surname,onChange:function(e){a({type:"ADD_SURNAME",payload:e.target.value})}})}),Object(h.jsx)("label",{className:"signUp-form-label",children:Object(h.jsx)("input",{className:"signUp-form-label-input",id:"emailInput",type:"email",placeholder:"Email...",value:t.email,onChange:function(e){a({type:"ADD_EMAIL",payload:e.target.value})}})}),Object(h.jsx)("label",{className:"signUp-form-label",children:Object(h.jsx)("input",{className:"signUp-form-label-input",id:"passwordInput",type:"password",placeholder:"Password...",value:t.password,onChange:function(e){a({type:"ADD_PASSWORD",payload:e.target.value})}})}),Object(h.jsx)("button",{onClick:m,className:"signUp-form-btn",type:"submit",children:"Sign Up"})]})]})})},x=["January","February","March","April","May","June","July","August","September","October","November","December"],I=Object(h.jsx)(y.a,{icon:v.c}),S=Object(h.jsx)(y.a,{icon:v.b}),L=Object(h.jsx)(y.a,{icon:v.a}),T=function(e){var a=e.task,t=e.index,n=Object(l.b)();return Object(h.jsxs)("label",{className:"userPage-tasks-inner__item",children:[Object(h.jsx)("input",{className:"userPage-tasks-inner__item-input",id:"task".concat(t),type:"text",onChange:function(e){var a=e.target;a&&n({type:"CHANGE_TODO",payload:{index:t,task:a.value}})},value:a}),Object(h.jsx)("div",{onClick:function(){n({type:"DELETE_TODO",payload:{index:t}})},className:"userPage-tasks-inner__item-delete",children:S})]})},k=function(){var e,a=O().request,t=Object(l.b)(),n=o((function(e){return e.userData})),r={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()},s=function(){var e=Object(b.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("https://boiling-garden-79412.herokuapp.com/api/saveuser","PATCH",{email:n.email,data:n.data});case 3:r=e.sent,console.log(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"SET_USER_LOGIN",payload:!1}),console.log(e.t0,"Error while fetching saving data...");case 11:t({type:"SET_USER_LOGIN",payload:!1}),t({type:"INITIALIZE"});case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"userPage userPage-outer",children:Object(h.jsxs)("div",{className:"userPage-inner container",children:[Object(h.jsx)("div",{className:"userPage-logOut",onClick:s,children:L}),Object(h.jsxs)("div",{className:"userPage-title",children:["Hello ",n.name," ",n.surname,"!"]}),Object(h.jsxs)("div",{className:"userPage-date",children:[Object(h.jsx)("span",{className:"bolder",children:(new Date).toLocaleDateString(window.navigator.language,{weekday:"long"})}),",\xa0",r.day," ",x[r.month+1]]}),Object(h.jsxs)("div",{className:"userPage__actions",children:[Object(h.jsx)("div",{className:"userPage__actions-item",onClick:function(){t({type:"ADD_NEW_TODO",payload:{task:"New Todo"}})},children:I}),Object(h.jsx)("div",{className:"userPage__actions-item",onClick:function(){t({type:"DELETE_ALL"})},children:S})]}),Object(h.jsx)("div",{className:"userPage-tasks",children:Object(h.jsx)("div",{className:"userPage-tasks-inner",children:(null===(e=n.data)||void 0===e?void 0:e.length)>0?n.data.map((function(e,a){return Object(h.jsx)(T,{index:a,task:e.task},a)})):Object(h.jsx)("label",{className:"userPage-tasks-inner__item",children:Object(h.jsx)("input",{placeholder:"No Tasks for today!",type:"text",className:"userPage-tasks-inner__item-input",disabled:!0})})})})]})})},U=function(){var e=o((function(e){return e.mainPageInfo})),a=e.isUserLogged,t=e.signUpClicked;return Object(h.jsx)("main",{className:"main main-outer",children:Object(h.jsx)("div",{className:"main-inner container",children:Object(h.jsx)("div",{className:"main-app",children:a?Object(h.jsx)(k,{}):t?Object(h.jsx)(A,{}):Object(h.jsx)(E,{})})})})},w=function(){return Object(h.jsx)(U,{})},P=t(11);!function(e){e.ADD_NAME="ADD_NAME",e.ADD_SURNAME="ADD_SURNAME",e.ADD_EMAIL="ADD_EMAIL",e.ADD_PASSWORD="ADD_PASSWORD"}(n||(n={}));var C,R={name:"",surname:"",email:"",password:"",data:[]};!function(e){e.ADD_EMAIL="ADD_EMAIL",e.ADD_PASSWORD="ADD_PASSWORD"}(C||(C={}));var G,M={email:"",password:""};!function(e){e.SET_USER_LOGIN="SET_USER_LOGIN",e.SET_LOGIN_FAILED="SET_LOGIN_FAILED",e.SET_SIGN_UP_CLICKED="SET_SIGN_UP_CLICKED"}(G||(G={}));var W,F={isUserLogged:!1,loginFailed:!1,signUpClicked:!1},q=t(20);!function(e){e.ADD_NEW_USER_DATA="ADD_NEW_USER_DATA",e.ADD_NEW_TODO="ADD_NEW_TODO",e.CHANGE_TODO="CHANGE_TODO",e.DELETE_TODO="DELETE_TODO",e.DELETE_ALL="DELETE_ALL",e.INITIALIZE="INITIALIZE"}(W||(W={}));var H={name:"",surname:"",email:"",id:"",data:[]},J=Object(P.b)({userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case n.ADD_NAME:return Object(p.a)(Object(p.a)({},e),{},{name:a.payload});case n.ADD_SURNAME:return Object(p.a)(Object(p.a)({},e),{},{surname:a.payload});case n.ADD_EMAIL:return Object(p.a)(Object(p.a)({},e),{},{email:a.payload});case n.ADD_PASSWORD:return Object(p.a)(Object(p.a)({},e),{},{password:a.payload});default:return Object(p.a)({},e)}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C.ADD_EMAIL:return Object(p.a)(Object(p.a)({},e),{},{email:a.payload});case C.ADD_PASSWORD:return Object(p.a)(Object(p.a)({},e),{},{password:a.payload});default:return Object(p.a)({},e)}},mainPageInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case G.SET_USER_LOGIN:return Object(p.a)(Object(p.a)({},e),{},{isUserLogged:a.payload});case G.SET_LOGIN_FAILED:return Object(p.a)(Object(p.a)({},e),{},{loginFailed:a.payload});case G.SET_SIGN_UP_CLICKED:return Object(p.a)(Object(p.a)({},e),{},{signUpClicked:a.payload});default:return e}},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case W.ADD_NEW_USER_DATA:return Object(p.a)(Object(p.a)({},e),a.payload);case W.ADD_NEW_TODO:return Object(p.a)(Object(p.a)({},e),{},{data:[].concat(Object(q.a)(e.data),[a.payload])});case W.DELETE_ALL:return Object(p.a)(Object(p.a)({},e),{},{data:[]});case W.CHANGE_TODO:var t=Object(q.a)(e.data);return t[a.payload.index]={task:a.payload.task},Object(p.a)(Object(p.a)({},e),{},{data:t});case W.DELETE_TODO:return Object(p.a)(Object(p.a)({},e),{},{data:e.data.filter((function(e,t){return t!==a.payload.index}))});case W.INITIALIZE:return e=H;default:return Object(p.a)({},e)}}}),K=Object(P.c)(J);i.a.render(Object(h.jsx)(l.a,{store:K,children:Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(w,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.b8cf9a1c.chunk.js.map